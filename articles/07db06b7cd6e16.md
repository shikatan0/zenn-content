---
title: "JavaScript ã¯å…¨ã¦ã®å®£è¨€ã‚’å·»ãä¸Šã’ã‚‹"
emoji: "ğŸ”"
type: "tech"
topics: ["javascript"]
published: true
---

## å·»ãä¸Šã’

JavaScript ã«ãŠã„ã¦ã€å·»ãä¸Šã’ (è‹±èª: hoisting)[^1] ã¯ **å¤‰æ•°ã®å®£è¨€ãŒã‚¹ã‚³ãƒ¼ãƒ—ã®å…ˆé ­ã§è¡Œã‚ã‚ŒãŸã‹ã®ã‚ˆã†ã«æ‰±ã‚ã‚Œã‚‹å‹•ä½œ** ã‚’æŒ‡ã—ã¾ã™ã€‚

[^1]: https://developer.mozilla.org/ja/docs/Glossary/Hoisting

```js
              // | let b      |
{             // |            |
              // | let a      |
  let a = 10  // |     a = 10 |
}             // |            |
let b = 20    // |     b = 20 |
```

## å·»ãä¸Šã’ `function`

`function` ã§å®£è¨€ã—ãŸé–¢æ•°ã¯å·»ãä¸Šã’ã«ã‚ˆã£ã¦ **å‰æ–¹ã‹ã‚‰å®Ÿè¡Œã§ãã¾ã™**ã€‚

```js
                  // | function f () {  |          |
                  // |   return "hello" |          |
                  // | }                |          |
console.log(f())  // | console.log(f()) | => hello |
                  // |                  |          |
function f () {   // |                  |          |
  return "hello"  // |                  |          |
}                 // |                  |          |
```

## å·»ãä¸Šã’ `var`

`var` ã§å®£è¨€ã—ãŸå¤‰æ•°ã¯å·»ãä¸Šã’ã«ã‚ˆã£ã¦ **å‰æ–¹ã‹ã‚‰å‚ç…§ã§ãã¾ã™**ã€‚

ãŸã ã€å·»ãä¸Šã’ã®å¯¾è±¡ã¨ãªã‚‹ã®ã¯å®£è¨€ã®ã¿ã§ã€**åˆæœŸåŒ–ã‚„ä»£å…¥ã¯åæ˜ ã•ã‚Œã¾ã›ã‚“**ã€‚
`var` ã§å®£è¨€ã¨åˆæœŸåŒ–ã‚’è¡Œã£ãŸå¤‰æ•°ã‚’å‰æ–¹ã‹ã‚‰å‚ç…§ã—ãŸå ´åˆã€åˆæœŸåŒ–æ™‚ã®å€¤ã§ã¯ãªã `undefined` ãŒå–å¾—ã•ã‚Œã¾ã™ã€‚

```js
                 // | var x           |              |
console.log(x)   // | console.log(x)  | => undefined |
                 // |                 |              |
var x = "hello"  // |     x = "hello" |              |
```

## å·»ãä¸Šã’ `let`, `const`, `class`

:::message
å³å¯†ã«ã¯ **temporal dead zone**[^2] ã«ã‚ˆã‚‹å‹•ä½œã§ã™ã€‚
:::

[^2]: https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/let#ä¸€æ™‚çš„ãªãƒ‡ãƒƒãƒ‰ã‚¾ãƒ¼ãƒ³_tdz

`let`, `const`, `class` ã§å®£è¨€ã—ãŸå¤‰æ•°ã¯å·»ãä¸Šã’ã«ã‚ˆã£ã¦ **å‰æ–¹ã‹ã‚‰å‚ç…§ã§ãã¾ã›ã‚“**ã€‚
`let`, `const`, `class` ã§å®£è¨€ã—ãŸå¤‰æ•°ã‚’å‰æ–¹ã‹ã‚‰å‚ç…§ã—ãŸå ´åˆã€ã‚¨ãƒ©ãƒ¼[^3]ãŒç™ºç”Ÿã—ã¾ã™ã€‚

[^3]: https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Errors/Cant_access_lexical_declaration_before_init

```js
                 // | let x           |                                                            |
console.log(x)   // | console.log(x)  | => ReferenceError: Cannot access 'x' before initialization |
                 // |                 |                                                            |
let x = "hello"  // |     x = "hello" |                                                            |
```

`let`, `const`, `class` ã§å®£è¨€ã—ãŸå¤‰æ•°ã¯å·»ãä¸Šã’ã«ã‚ˆã£ã¦å‰æ–¹ã‹ã‚‰å‚ç…§ã§ãã¾ã›ã‚“ãŒã€å®£è¨€ã®å·»ãä¸Šã’è‡ªä½“ã¯è¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚
ã‚ˆã£ã¦ã€å¤‰æ•°ã®åˆæœŸåŒ–å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°å†…ã§ã‚ã‚Œã° **è¡¨è¨˜ä¸Šã§ã®å‰æ–¹ã‹ã‚‰å¤‰æ•°ã‚’å‚ç…§ã§ãã¾ã™**ã€‚

```js
                   // | let x           |          |
const f = () => {  // |                 |          |
  console.log(x)   // |                 |          |
}                  // |                 |          |
                   // |                 |          |
let x = 'hello'    // |     x = 'hello' |          |
                   // |                 |          |
f()                // | console.log(x)  | => hello |
```

ä½¿ã„é“ã¨ã—ã¦ã¯ **ç›¸äº’å†å¸°ãªé–¢æ•°ã®å®šç¾©** ã‚„ **è£œåŠ©é–¢æ•°ã®è¨˜è¿°ä½ç½®ã‚’ä¸‹ã«ã—ãŸã„** å ´åˆãŒè€ƒãˆã‚‰ã‚Œãã†ã§ã™ã€‚

```js:ç›¸äº’å†å¸°ãªé–¢æ•°ã®å®šç¾©
const main = () => {
  // ...
  sub()
}
const sub = () => {
  // ...
  main()
}
```

```js:è£œåŠ©é–¢æ•°ã®è¨˜è¿°ä½ç½®ã‚’ä¸‹ã«ã—ãŸã„
export const main = () => {
  sub()
}
const sub = () => {
  // ...
}
```

# end
